<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>index</title>
<link rel="stylesheet" rev="stylesheet" href="ui.css" type="text/css">
<script>
function $(a) {
        return document.getElementById(a);
}
function getHtml(path)
{
	OptionsDlg.getHtml(path);
}
function syncClick()
{
	OptionsDlg.startSync();
}
function reject()
{
	OptionsDlg.reject();
}
function apply(key)
{
	OptionsDlg.apply('ckStartWithSystem',$('ckStartWithSystem').checked);
	OptionsDlg.apply('ckShowTray',$('ckShowTray').checked);
	OptionsDlg.apply('ckShowMainwindow',$('ckShowMainwindow').checked);
	OptionsDlg.apply('ckAutoUpdate',$('ckAutoUpdate').checked);
	OptionsDlg.apply('ckScanDir',$('ckScanDir').checked);
	OptionsDlg.apply('hotkeyModifier',$('hotkey_0').value);
	OptionsDlg.apply('hotkeyAction',$('hotkey_1').value);
	OptionsDlg.apply('Account/Username',$('Username').value);
	OptionsDlg.apply('Account/Userpasswd',$('Userpasswd').value);
	OptionsDlg.accept();
}
function   set_selected(s_value,id){   
	  if(s_value!=""){   
	  s_obj   =  $(id).options;   
	  len   =   s_obj.length;   
		  for   (i   =   0;   i   <   len;   i++ ){   
			  if(s_value   ==   s_obj[i].value){
				s_obj[i].selected=   true; 
				}   
		  }   
	  }   
}
function checkUsername()
{  
  var   supported   =   0;     
  if   (window.RegExp)   {     
  var   tempStr   =   "a";     
  var   tempReg   =   new   RegExp(tempStr);     
  if   (tempReg.test(tempStr))   supported   =   1;     
  }     
  if   (!supported)     
  return   (str.indexOf(".")   >   2)   &&   (str.indexOf("@")   >   0);     
	str=$('Username').value;
	var r=new RegExp("^[a-zA-Z0-9]{1}[\.a-zA-Z0-9_-]*[a-zA-Z0-9]{1}@[a-zA-Z0-9]+[-]{0,1}[a-zA-Z0-9]+[\.]{1}[a-zA-Z]+[\.]{0,1}[a-zA-Z]+$");
	if(!r.test(str))
	{
		alert('错误的用户名！请输入一个合法的用户名');
		$('Username').value='';
	}
}
function accountTestClick()
{
	OptionsDlg.accountTestClick($('Username').value,$('Userpasswd').value);
}

</script>
</head>
<body>
<div id="wrap">
		<div id="header"></div>
		<div class="main">
			<div id="lm"></div>
			<div id="rm">
				<fieldset class="cfgitem">
					<legend>启动</legend>
					<table width="100%">
					 <tr>
						<td width="50%"><input type="checkbox" name="ckStartWithSystem" id="ckStartWithSystem" />&nbsp随系统启动</td>
						<td width="50%"><input type="checkbox" name="ckShowTray" id="ckShowTray" />&nbsp显示托盘</td>
					</tr>	
					 <tr>
						<td width="50%"><input type="checkbox" name="ckShowMainwindow" id="ckShowMainwindow" />&nbsp显示主窗口</td>
						<td width="50%"><input type="checkbox" name="ckAutoUpdate" id="ckAutoUpdate" />&nbsp自动检查升级</td>
					</tr>
					<tr>
						<td width="50%"><input type="checkbox" name="ckScanDir" id="ckScanDir" />&nbsp扫描自定义文件夹</td>
						<td width="50%" align="right" cellspacing="0"></td>
					</tr>
					<tr>
						<table width="100%">
							<tr>
								<td width="10%">快捷键:</td>
								<td width="40%" align=left>
									<select id="hotkey_0" width=40 class="select">	
										<option value="134217728" > Alt</option>
										<option value="33554432" > Shift</option>
										<option value="268435456" > Win</option>
										<option value="67108864"> Ctrl</option>				
									</select>
								</td>
								<td width="40%">
									<select id="hotkey_1" width=30 class="select" >
										<option value="16777216" > Space</option>
										<option value="16777217"> Tab</option>
										<option value="16777219" > Backspace</option>
										<option value="16777221" > Enter</option>
									</select>
								</td>
							</tr>		
						</table>
					</tr>
					</table>
				</fieldset>
				<fieldset class="cfgitem">
					<legend>帐号</legend>
					<table width="100%">
						<tr>
							<td width="10%">用户:</td>
							<td width="50%" align=left><input name="Username" type="text" id="Username" size=20 onblur="checkUsername();" class="itext" /></td>
							<td width="30%" align=right>
							<div class="btn">
								<a href="#"  onclick="accountTestClick();"><label>测试</label></a>
							</div>
							</td>
						</tr>
						<tr >
							<td width="10%">密码:</td>
							<td width="50%" align=left><input name="Userpasswd" type="password" id="Userpasswd" size=20 class="itext" /></td>
							<td width="30%" align=right>
							<div class="btn">
								<a href="#" onclick="syncClick();"><label>同步</label></a>
							</div>
							</td>
						</tr>
					</table>
					<table width="100%">
						<tr>
							<td width="15%">上次状态:</td>
							<td width="20%" align=left id="lastsyncstatus"><img src="image/loading.gif"></td>
							<td width="25%">上次同步时间:</td>
							<td width="50%" id="lastsynctime"></td>
						</tr>					
					</table>
				</fieldset>
			</div>
		</div>
</div>
<div id="applybtn"></div>
</body>
</html>